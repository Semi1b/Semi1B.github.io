<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Mijn Minecraft/Terraria Webgame</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <hr>
    
    <h1>⛏️ Minecraft/Terraria Style Game</h1>
    <p>Welkom in jouw 2D wereld! Gebruik W/A/D of de knoppen om te bewegen en springen.</p>

    <div id="game-area" style="border: 2px solid #FFC107; height: 400px; width: 600px; margin: 20px auto; position: relative; overflow: hidden; background-color: #79a6d9;">
        <div id="player" style="position: absolute; width: 30px; height: 30px; background-color: #388E3C; top: 0px; left: 0px;"></div>
        </div>
    
    <div id="controls" style="text-align: center; margin-top: 10px;">
        <button onclick="jump()" style="width: 60px; height: 30px; background-color: #FFC107; color: #1A237E; border: none; display: block; margin: 0 auto 5px; font-weight: bold; cursor: pointer;">▲ Springen</button>
        <div style="display: flex; justify-content: center;">
            <button onmousedown="movePlayer('left')" ontouchstart="movePlayer('left')" ontouchend="stopPlayer()" onmouseup="stopPlayer()" style="width: 60px; height: 30px; background-color: #FFC107; color: #1A237E; border: none; margin-right: 5px; font-weight: bold; cursor: pointer;">◀ Links</button>
            <button onmousedown="movePlayer('right')" ontouchstart="movePlayer('right')" ontouchend="stopPlayer()" onmouseup="stopPlayer()" style="width: 60px; height: 30px; background-color: #FFC107; color: #1A237E; border: none; font-weight: bold; cursor: pointer;">▶ Rechts</button>
        </div>
        </div>

    <script>
        const player = document.getElementById('player');
        const gameArea = document.getElementById('game-area');
        const tileSize = 30; // Blokken en speler zijn 30x30 pixels
        
        // De wereldkaart. 0 = lucht, 1 = gras/aarde, 2 = steen (nieuwe toevoeging)
        // De game-area is 600px breed (20 kolommen) en 400px hoog (13 rijen).
        const world = [
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], // Rij 1
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0], // Een grasplatform
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0], // Een stenen platform
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]  // De grond (gras)
        ];

        let playerX = tileSize * 2; // Startpositie X
        let playerY = 0; // Startpositie Y (Bovenin)
        let velocityY = 0; // Verticale snelheid (voor zwaartekracht/springen)
        const gravity = 1; 
        const jumpPower = -15; 
        const moveSpeed = 5;
        let currentDirection = null;
        let isJumping = false;
        let gameLoop;
        const playerSize = tileSize;


        // --- FUNCTIES VOOR DE WERELD ---

        // Teken alle blokken in de wereld
        function drawWorld() {
            // Verwijder alleen de oude tegels, houd de speler en knoppen
            // Dit is cruciaal om te voorkomen dat de speler verdwijnt.
            document.querySelectorAll('.tile').forEach(tile => tile.remove()); 
            
            for (let y = 0; y < world.length; y++) {
                for (let x = 0; x < world[y].length; x++) {
                    const blockType = world[y][x];
                    if (blockType > 0) { // Alleen tekenen als het geen lucht is (0)
                        const block = document.createElement('div');
                        block.className = 'tile';
                        block.style.position = 'absolute';
                        block.style.width = tileSize + 'px';
                        block.style.height = tileSize + 'px';
                        block.style.left = (x * tileSize) + 'px';
                        block.style.top = (y * tileSize) + 'px';
                        block.style.border = '1px solid #1B5E20';
                        
                        // Kleur bepalen op basis van bloktype
                        if (blockType === 1) { // Gras
                            block.style.backgroundColor = '#388E3C'; 
                        } else if (blockType === 2) { // Steen (Nieuwe kleur)
                            block.style.backgroundColor = '#607D8B'; 
                            block.style.border = '1px solid #455A64';
                        }

                        gameArea.appendChild(block);
                    }
                }
            }
        }

        // Controleer op botsingen met de blokken (vereenvoudigde
